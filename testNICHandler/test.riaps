app TEST {
  message ReqMsg;
  message RepMsg;
  message NicReq;
  message NicRep;
  message Heartbeats;
  message intHbs;

  component CompReq(logfile) {
    req reqPort : (ReqMsg,RepMsg);
    req reqNicKill : (NicReq,NicRep);
    timer clock 1000;
    timer sporadic;

    timer extHbClock 1000;
    pub extHbPub : Heartbeats;
    sub extHbSub : Heartbeats;

    timer intHbClock 1000;
    pub intHbPub : intHbs;
    sub intHbSub : intHbs;
  }

  component CompRep(logfile) {
    rep repPort : (ReqMsg,RepMsg);

    timer extHbClock 1000;
    pub extHbPub : Heartbeats;
    sub extHbSub : Heartbeats;
  }

  device NicDevice(logfile) {
    rep repPort : (NicReq,NicRep);

    timer intHbClock 1000;
    pub intHbPub : intHbs;
    sub intHbSub : intHbs;
  }

  actor ActorA(logfile = "ActorA") {
    local NicReq, NicRep, intHbs;
    {
      requestor : CompReq(logfile = logfile);
      killer : NicDevice(logfile = logfile);
    }
  }

  actor ActorB(logfile = "ActorB") {
    {
      replier : CompRep(logfile = logfile);
    }
  }
}
